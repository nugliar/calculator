{"version":3,"sources":["logicSlice.js","Display.js","DigitButton.js","FractionButton.js","DigitButtons.js","OperatorButton.js","EqualsButton.js","AllClearButton.js","Buttons.js","FormulaDisplay.js","App.js","img/GitHub-Mark-64px.png","store.js","index.js"],"names":["BigInt","prototype","toJSON","this","toString","OPERAND","OPERATOR","EQUALS","MINUS","ERROR_SYNTAX","bigintPow","bigint","expo","result","i","newOperand","type","coefficient","exponent","isNegative","isRational","NAN_OPERAND","operandSize","operand","Math","max","length","abs","clampOperand","coeff","calculatePrimitive","operand2","operator","operand1","undefined","symbol","c1","c2","e2","e1","Error","min","displayOperand","sizeLimit","sign","sizeOperand","coeffDisplay","expoDisplay","display","console","log","sizeExpo","slice","concat","replace","match","repeat","displayFormula","expression","map","item","join","bigIntExpression","initialState","lastInput","logicSlice","createSlice","name","reducers","allClear","state","Object","assign","addOperandDigit","action","digit","payload","pop","push","addFraction","addOperator","formulaAdd","calculateExpression","order","postfixExpr","operatorStack","prevOperator","unshift","shift","operandStack","error","message","actions","selectDisplay","logic","selectFormulaDisplay","Display","useSelector","id","className","DigitButton","props","dispatch","useDispatch","onClick","label","FractionButton","buttonIds","DigitButtons","digitButtons","index","reverse","OperatorButton","e","EqualsButton","AllClearButton","Buttons","FormulaDisplay","formula","App","href","src","alt","configureStore","reducer","logicReducer","ReactDOM","render","StrictMode","store","document","getElementById"],"mappings":"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","file":"static/js/main.8c535331.chunk.js","sourcesContent":["import { createSlice } from '@reduxjs/toolkit'\n\nBigInt.prototype.toJSON = function() { return this.toString() }\n\nconst OPERAND = 'OPERAND'\nconst OPERATOR = 'OPERATOR'\nconst EQUALS = 'EQUALS'\nconst MINUS = '-'\nconst PLUS = '+'\nconst MULTIPLY = 'x'\nconst DIVIDE = '/'\nconst EQUAL = '='\n\n// Negative sign for PRECISION will not have any effect\nconst PRECISION = 20\n\nconst ERROR_SYNTAX = 'SYNTAX ERROR'\nconst ERROR_DIVISION_BY_ZERO = 'DIVISION BY ZERO'\n\n// Exponentiation routine for bigint\nconst bigintPow = (bigint, expo) => {\n  let result = BigInt(1)\n\n  for (let i = 0; i < expo; i++) {\n    result *= bigint\n  }\n  return result\n}\n\n// Create new operand\nconst newOperand = () => {\n  return {\n    type: OPERAND,\n    coefficient: BigInt(0),\n    exponent: 0,\n    isNegative: false,\n    isRational: false\n  }\n}\n\n// Create new operator\nconst newOperator = () => {\n  return {\n    type: OPERATOR,\n    symbol: ''\n  }\n}\n\n\n// For NaN values a special big-integer operand is used.\nconst NAN_OPERAND = {...newOperand(), coefficient: null}\n\nconst operandSize = (operand) => {\n  if (!operand || operand.coefficient === null) {\n    return 'NaN'.length\n  }\n  return (operand.isRational ? 1 : 0) + Math.max(\n    operand.coefficient.toString().length,\n    Math.abs(operand.exponent)\n  )\n}\n\nconst clampOperand = (operand) => {\n\n  // Remove trailing zeros\n\n  if (!operand || operand.coefficient === null) {\n    return NAN_OPERAND\n  }\n\n  let coeff = operand.coefficient\n  let expo = operand.exponent\n\n  while (expo < 0 && coeff % 10n === 0n) {\n    coeff /= 10n\n    expo++\n  }\n\n  return {\n    ...newOperand(),\n    coefficient: coeff,\n    exponent: expo,\n    isRational: expo !== 0,\n    isNegative: operand.isNegative\n  }\n}\n\nconst calculatePrimitive = (operand2, operator, operand1) => {\n\n  // Evaluate primitive expression\n\n  if (operator === undefined) {\n    return NAN_OPERAND\n  }\n  if (operand2 === undefined || operand2.coefficient === null) {\n    return NAN_OPERAND\n  }\n  if (operand1 === undefined) {\n\n    switch(operator.symbol) {\n      case MINUS:\n        return {...operand2, isNegative: !operand2.isNegative}\n      case PLUS:\n        return operand2\n      default:\n        return NAN_OPERAND\n    }\n  }\n  if (operand1.coefficient === null) {\n    return NAN_OPERAND\n  }\n\n  const c1 = operand1.coefficient * BigInt(operand1.isNegative ? -1 : 1)\n  const c2 = operand2.coefficient * BigInt(operand2.isNegative ? -1 : 1)\n  const e2 = operand2.exponent\n  const e1 = operand1.exponent\n\n  let coeff = 0n\n  let expo = 0\n\n  switch(operator.symbol) {\n    case MULTIPLY:\n      coeff = c1 * c2\n      expo = e1 + e2\n      break\n    case DIVIDE:\n      if (c2 === BigInt(0)) {\n        throw(new Error(ERROR_DIVISION_BY_ZERO))\n      }\n      expo = -Math.abs(5 * PRECISION)\n      coeff = (c1 * bigintPow(10n, -expo)) / c2\n      expo += e1 - e2\n      break\n    case PLUS:\n      expo = Math.min(e1, e2);\n      coeff = c1 * bigintPow(10n, -expo + e1) +\n        c2 * bigintPow(10n, -expo + e2)\n      break\n    case MINUS:\n      expo = Math.min(e1, e2)\n      coeff = c1 * bigintPow(10n, -expo + e1) -\n        c2 * bigintPow(10n, -expo + e2)\n      break\n    default:\n      break\n  }\n\n  return clampOperand({\n    ...newOperand(),\n    coefficient: coeff > 0n ? coeff : -coeff,\n    exponent: expo,\n    isNegative: coeff < 0n,\n    isRational: expo < 0\n  })\n}\n\nconst displayOperand = (operand) => {\n\n  const sizeLimit = Math.abs(PRECISION)\n\n  if (!operand || operand.coefficient === null) {\n    return ('NaN')\n  }\n  const sign = operand.isNegative ? '-' : ''\n  const coeff = operand.coefficient\n  const expo = operand.exponent\n  const sizeOperand = operandSize(operand)\n\n  let coeffDisplay = coeff.toString()\n  let expoDisplay = ''\n  let display = ''\n\n  console.log(coeff, coeffDisplay.length, expo);\n  // If number too large or too small use exponential form\n  if ((sizeOperand > sizeLimit && expo >= 0)\n  || (expo < 0 && Math.abs(coeffDisplay.length + expo) >= sizeLimit - 2)) {\n    // Use exponential form\n    const sizeExpo = coeffDisplay.length - 1 + expo\n    expoDisplay = sizeExpo ? `e${sizeExpo < 0 ? '' : '+'}${sizeExpo}` : ''\n\n    if (coeff === BigInt(0)) {\n      return sign + '0'\n    }\n    if (coeffDisplay.length > 1) {\n      // Insert decimal point\n      coeffDisplay = coeffDisplay\n        .slice(0, 1)\n        .concat(`.${coeffDisplay.slice(1, sizeLimit - expoDisplay.length - 1)}`)\n      // Remove trailing zeros\n      coeffDisplay = coeffDisplay.replace(\n        coeffDisplay.match(/\\.?0+$/),\n        ''\n      )\n    }\n    display = coeffDisplay + expoDisplay\n    return display.length <= sizeLimit ? sign + display : sign + 'inf'\n\n  } else {\n    // Fit to precision\n    if (operand.isRational) {\n      // Prepend zeros according to exponent value\n      if (coeffDisplay.length <= Math.abs(expo)) {\n        coeffDisplay = '0'\n          .repeat(Math.abs(expo) - coeffDisplay.length + 1)\n          .concat(coeffDisplay)\n      }\n      coeffDisplay = coeffDisplay\n        .slice(0, coeffDisplay.length - Math.abs(expo))\n        .concat(`.${coeffDisplay.slice(coeffDisplay.length - Math.abs(expo))}`)\n\n    } else {\n      // Append zeros accroding to exponent value\n      coeffDisplay = coeffDisplay.concat('0'.repeat(expo))\n    }\n    return sign + coeffDisplay.slice(0, sizeLimit)\n  }\n}\n\nconst displayFormula = (expression) => {\n  const expr = [...expression]\n\n  return expr.map(item => {\n    switch(item.type) {\n      case OPERAND:\n        return displayOperand(item)\n      case OPERATOR:\n        return `${item.symbol}`\n      default:\n        return ''\n    }\n  }).join(' ')\n}\n\n// Extract big-integer array from redux state\n// to avoid \"non-serializable type\" redux error\n\nlet bigIntExpression = []\n\n// Array is a sequence of operands and operator which form\n// a mathematical expression. Numbers are represented\n// as a big-integers in the following form:\n\n// NUMBER = COEFFICIENT * 10 ^ EXPONENT\n\n// This form allows big-integer rational numbers\n\nconst initialState = {\n  lastInput: '',\n  isNegative: false,\n  display: '',\n  displayFormula: ''\n}\n\nconst logicSlice = createSlice({\n  name: 'logic',\n  initialState,\n  reducers: {\n\n    allClear: (state) => {\n      Object.assign(state, initialState)\n      bigIntExpression = []\n    },\n\n    addOperandDigit: (state, action) => {\n\n      // Add digit to operand on top ofthe stack, if any.\n      // Create new operand if needed.\n\n      const digit = action.payload\n      let operand = newOperand()\n\n      if (state.lastInput === EQUALS) {\n        bigIntExpression = []\n        state.isNegative = false\n      }\n      if (state.lastInput === OPERAND) {\n        operand = bigIntExpression.pop()\n      }\n\n      const sizeLimit = Math.abs(PRECISION)\n      const sizeOperand = operandSize(operand)\n\n      // Add digit only if operand size is within precision limits\n      if (sizeOperand < sizeLimit) {\n        operand.coefficient = 10n * operand.coefficient + BigInt(digit)\n        operand.exponent -= operand.isRational ? 1 : 0\n        operand.isNegative = state.isNegative\n      }\n\n      bigIntExpression.push(operand)\n      state.display = displayOperand(operand)\n      state.displayFormula = displayFormula(bigIntExpression)\n      state.lastInput = OPERAND\n    },\n\n    addFraction: (state) => {\n\n      // Set isRational flag for operand on top ofthe stack, if any.\n      // Create new operand if needed.\n\n      let operand = newOperand()\n\n      if (state.lastInput === EQUALS) {\n        bigIntExpression = []\n        state.isNegative = false\n      }\n      if (state.lastInput === OPERAND) {\n        operand = bigIntExpression.pop()\n      }\n      if (!operand.isRational) {\n        const sizeLimit = Math.abs(PRECISION)\n        const sizeOperand = operandSize(operand)\n\n        if (sizeOperand < sizeLimit) {\n          operand.isRational = true\n        }\n      }\n      bigIntExpression.push(operand)\n      state.display = displayOperand(operand)\n      state.displayFormula = displayFormula(bigIntExpression)\n      state.lastInput = OPERAND\n    },\n\n    addOperator: (state, action) => {\n\n      // If top of the stack is operator, then replace it\n      // with current operator, otherwise add new operator on to\n      // the stack. If current operator is minus and\n      // top of the stack is operator, then treat minus operator as\n      // a negative sign.\n\n      let operator = newOperator()\n      let symbol = action.payload\n      let isNegative = false\n      let formulaAdd = ''\n\n      if (state.lastInput === OPERATOR) {\n        operator = bigIntExpression.pop()\n        if (symbol === MINUS) {\n          isNegative = symbol === MINUS\n          symbol = operator.symbol\n          formulaAdd = '-'\n        }\n      }\n      operator.symbol = symbol\n\n      bigIntExpression.push(operator)\n      state.isNegative = isNegative\n      state.display = isNegative ? MINUS : operator.symbol\n      state.displayFormula = displayFormula(bigIntExpression) + formulaAdd\n      state.lastInput = OPERATOR\n    },\n\n    calculateExpression: (state, action) => {\n\n      // Convert expression to postfix form and calculate.\n\n      // If last item in expression is operator, remove it.\n      if (bigIntExpression.length > 0) {\n        const lastItem = bigIntExpression[bigIntExpression.length - 1]\n        if (lastItem.type === OPERATOR) {\n          bigIntExpression.pop()\n        }\n      }\n      // Stop if nothing to calculate.\n      if (bigIntExpression.length === 0) {\n        Object.assign(state, initialState)\n        return\n      }\n\n      state.displayFormula = displayFormula(bigIntExpression)\n\n      // Precedense of operators.\n      const order = {\n        [MULTIPLY]: 2,\n        [DIVIDE]: 2,\n        [PLUS]: 1,\n        [MINUS]: 1,\n        [EQUAL]: 1\n      }\n\n      // Convert to postfix form (operator follows operands).\n      let postfixExpr = []\n      let operatorStack = []\n      let prevOperator = undefined\n\n      // Initialize postfix stack with operand\n      // on top of bigint stack (if any).\n      if (bigIntExpression[0].type === OPERAND) {\n        postfixExpr.unshift(bigIntExpression.shift())\n      }\n      // Initialize previous operator value\n      prevOperator = bigIntExpression[0]\n\n      while (bigIntExpression.length > 0) {\n        // Pop item from bigint stack\n        const item = bigIntExpression.shift()\n\n        if (item.type === OPERATOR) {\n          // Push item to operator stack\n          operatorStack.unshift(item)\n\n        } else if (item.type === OPERAND) {\n          // Get last operator from operator stack\n          const operator = operatorStack[0]\n\n          if (prevOperator) {\n            // If previous operator has lower precedense than current\n            // operator, pop previous operator from postfix stack and\n            // push it back to operator stack.\n            if (order[prevOperator.symbol] < order[operator.symbol]) {\n              operatorStack.unshift(postfixExpr.shift())\n            }\n          }\n          // Push operand to postfix stack, followed by all operators\n          // from the operator stack.\n          postfixExpr.unshift(...operatorStack, item)\n          prevOperator = operatorStack[0]\n          operatorStack = []\n        }\n      }\n\n      if (operatorStack.length > 0) {\n        Object.assign(state, initialState)\n        state.display = ERROR_SYNTAX\n        return\n      }\n\n      let operandStack = []\n\n      // Evaluate postfix expression\n      while (postfixExpr.length > 0) {\n        const item = postfixExpr.pop()\n\n        if (item.type === OPERAND) {\n          operandStack.push(\n            clampOperand(item)\n          )\n        } else {\n          try {\n            operandStack.push(\n              calculatePrimitive(\n                operandStack.pop(),\n                item,\n                operandStack.pop()\n              )\n            )\n          } catch(error) {\n            Object.assign(state, initialState)\n            state.display = error.message\n            return\n          }\n        }\n      }\n\n      // Display result and update expression stack\n      if (operandStack.length === 1) {\n        state.display = displayOperand(...operandStack)\n        state.displayFormula += ` = ${state.display}`\n        bigIntExpression = [...operandStack]\n      } else {\n        Object.assign(state, initialState)\n        state.display = ERROR_SYNTAX\n      }\n\n      state.lastInput = EQUALS\n    }\n  }\n})\n\nexport default logicSlice.reducer\n\nexport const {\n  allClear,\n  addOperandDigit,\n  addOperator,\n  addFraction,\n  calculateExpression\n} = logicSlice.actions\n\nexport const selectDisplay = state => state.logic.display ?\n  state.logic.display : 0\n\nexport const selectFormulaDisplay = state => state.logic.displayFormula\n","import { useSelector } from 'react-redux'\n\nimport { selectDisplay } from './logicSlice'\n\nexport const Display = () => {\n  const display = useSelector(selectDisplay)\n\n  return (\n    <div id='display' className='display display-large'>\n      <p className='display-text'>{display}</p>\n    </div>\n  )\n}\n","import { useDispatch } from 'react-redux'\nimport { addOperandDigit } from './logicSlice'\n\nexport const DigitButton = (props) => {\n  const dispatch = useDispatch()\n\n  const handleClick = () => {\n    dispatch(addOperandDigit(props.label))\n  }\n\n  return (\n    <div id={props.id} className='button button-digit' onClick={handleClick}>\n      <p>{props.label}</p>\n    </div>\n  )\n}\n","import { useDispatch } from 'react-redux'\nimport { addFraction } from './logicSlice'\n\nexport const FractionButton = () => {\n  const dispatch = useDispatch()\n\n  const handleClick = () => {\n    dispatch(addFraction())\n  }\n\n  return (\n    <div id='decimal' className='button button-digit' onClick={handleClick}>\n      <p>.</p>\n    </div>\n  )\n}\n","import { DigitButton } from './DigitButton'\nimport { FractionButton } from './FractionButton'\n\nconst buttonIds = [\n  'zero', 'one', 'two', 'three', 'four',\n  'five', 'six', 'seven', 'eight', 'nine'\n]\n\nexport const DigitButtons = () => {\n  const digitButtons = buttonIds.map((id, index) => {\n    return (\n      <DigitButton key={id} id={buttonIds[index]} label={index} />\n    )\n  })\n\n  return (\n    <div id='digits' className='grid grid-row-3'>\n      {digitButtons.reverse()}\n      <FractionButton />\n    </div>\n  )\n}\n","import { useDispatch } from 'react-redux'\nimport { addOperator } from './logicSlice'\n\nexport const OperatorButton = (props) => {\n  const dispatch = useDispatch()\n\n  const handleClick = (e) => {\n    dispatch(addOperator(props.label))\n  }\n\n  return (\n    <div id={props.id} className='button button-oper' onClick={handleClick}>\n      <p>{props.label}</p>\n    </div>\n  )\n}\n","import { useDispatch } from 'react-redux'\nimport { calculateExpression } from './logicSlice'\n\nexport const EqualsButton = (props) => {\n  const dispatch = useDispatch()\n\n  const handleClick = () => {\n    dispatch(calculateExpression())\n  }\n\n  return (\n    <div id='equals' className='button button-oper' onClick={handleClick}>\n      <p>=</p>\n    </div>\n  )\n}\n","import { useDispatch } from 'react-redux'\nimport { allClear } from './logicSlice'\n\nexport const AllClearButton = () => {\n  const dispatch = useDispatch()\n\n  const handleClick = () => {\n    dispatch(allClear())\n  }\n\n  return (\n    <div id='clear' className='button button-oper' onClick={handleClick}>\n      <p>AC</p>\n    </div>\n  )\n}\n","import { DigitButtons } from './DigitButtons'\nimport { OperatorButton } from './OperatorButton'\nimport { EqualsButton } from './EqualsButton'\nimport { AllClearButton } from './AllClearButton'\n\nexport const Buttons = () => {\n\n  return (\n    <div id='buttons' className='grid grid-row-4'>\n      <AllClearButton />\n      <OperatorButton id='divide' label='/' />\n      <OperatorButton id='multiply' label='x' />\n      <DigitButtons />\n      <OperatorButton id='subtract' label='-' />\n      <OperatorButton id='add' label='+' />\n      <EqualsButton />\n    </div>\n  )\n}\n","import { useSelector } from 'react-redux'\n\nimport { selectFormulaDisplay } from './logicSlice'\n\nexport const FormulaDisplay = () => {\n  const formula = useSelector(selectFormulaDisplay)\n\n  return (\n    <div className='display display-small'>\n      <p className='display-text'>{formula}</p>\n    </div>\n  )\n}\n","import React from 'react'\nimport { Display } from './Display'\nimport { Buttons } from './Buttons'\nimport { FormulaDisplay } from './FormulaDisplay'\nimport githubIcon from './img/GitHub-Mark-64px.png'\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n      </header>\n      <div className='outer-container'>\n        <div className='calculator'>\n          <div className='description'>\n            <a className='link' href='https://github.com/nugliar/calculator'>\n              <img src={githubIcon} alt='git' />\n              <span>Javascript Calculator</span>\n            </a>\n          </div>\n          <FormulaDisplay />\n          <Display />\n          <Buttons />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFNTE3OEEyRTk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFNTE3OEEyRjk5QTAxMUUyOUExNUJDMTA0NkE4OTA0RCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkU1MTc4QTJDOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkU1MTc4QTJEOTlBMDExRTI5QTE1QkMxMDQ2QTg5MDREIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+FYrpWAAABrNJREFUeNrkW2ls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\"","import { configureStore } from '@reduxjs/toolkit'\n\nimport logicReducer from './logicSlice'\n\nexport default configureStore({\n  reducer: {\n    logic: logicReducer\n  }\n})\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux'\n\nimport './index.css';\nimport App from './App';\nimport store from './store'\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}